<h2><strong>ULTRABAC'S IBM TIVOLI STORAGE MANAGER (TSM) DEVICE<br />UltraBac バージョン8.2.2 TSMデバイス用新デザインモデル</strong><br /><br /></h2>
<p><a title="TSM Device White Paper" href="~/data/default/content/0805_TSMDevice_Japanese.pdf">PDF Version</a><br /><br /></p>
<p>UltraBac Software社のベアメタル・ディザスタ・リカバリ（DR）ツール、UBDR Goldは、重要な機能を提供することによってIBM社のTivoliストレージマネージャ（TSM）に対する付加価値サービスを提供します。 UBDR Goldは、TSM環境内でのイメージバックアップの保存を可能にし、また必要な場合は、TSMと接続して故障したWindowsサーバーのコールドブートを可能にします。その後、UBDR GoldブートCDまたはUSBキーオプションのいずれかを使用して、最後に保存されたスナップショットから故障したサーバーの完全なイメージコピーを早急に取り出すことができます。<br /><br /></p>
<p>UBDR Goldは、非常に高速で柔軟的にこの機能提供します。たとえば、わずか６分でフル・ディザスタ・リカバリ・リストアを実行できます。 本製品は、TSMのみならず、FTP、テープ、ライブラリ、オンラインディスク、UNCパス、SAN、NASおよびCD／DVDへの、またはそれらからのイメージバックアップの保存および取り出しを可能にすることで、ユーザーへ全てのディザスタ・リカバリ・オプションを提供します。さらに、UBDR Goldはネイティブ３２ビットおよび６４ビット版の両方で御利用になれます。<br /><br /></p>
<p>UBDR GOLDは、必要に応じて古いハードウェアを簡単に更新できるように異機種間ハードウェアリストア機能も提供します。さらに、UBDR GoldはP2V、V2VおよびV2P変換を楽々と実行します。また、次回発売のUBDR Goldでは、ディザスタ・リカバリ・イメージ・バックアップの一部としてネイティブVMDKファイルを同時に書き込む機能が追加されます。<br /><br /></p>
<p>最後に、UBDR Goldは、すでに御利用中のあらゆるファイルベースのバックアップソルーションとともにインストールおよび使用できるため、ユーザーは、全ての重要なWindowsサーバーの拡張バックアップおよびディザスタ・リカバリ・プロテクションの利点をユーザーの環境内において享受することができます。<br /><br /></p>
<p>本ホワイトペーバーは、UltraBacのTivoli ストレージ・マネージャ・デバイスに御利用可能な最新オプションを説明します。<br /><br /></p>
<p><strong>イントロダクション</strong><br /><br /></p>
<p align="left"><img alt="Fig 1 - UltraBac TSM Device Properties" src="~/data/default/images/catalog/original/0805_TSMDevice1.jpg"><br /><font size="1"><strong>図１</strong> — UltraBacのTSMデバイスプロパティ</font><br /><br /></p>
<p>上記ダイアログボックスに示すようにUltraBacの新規オプションが利用できます。ここで詳細を説明します。</p>
<ol>
<li>ポート。固有のポート番号をユーザーインターフェース内で指定することができ、DSM.OPTファイルに情報を入れる必要がありません。これはUBDR GoldリストアCDまたはUSBキーから起動する際に特に有益です。</li>
<li>DSM.OPT用の編集ボタン。ポート番号をユーザーインターフェースに含めることがで きるため、DSM.OPTファイルをあまり使用する必要はありませんが、編集ボタンを追加してUltraBacがノートパッドのDSM.OPTを容易に開けるようにしました。これは UBDR GoldリストアCDでブートする際に特に有益です。「Connect To：」機能を使用し てリモートマシンに接続している場合、編集ボタンは利用できません。このボタンは ローカルマシンのDSM.OPTファイルを常に呼び出します。</li>
<li>アクティブ／非アクティブファイル。非アクティブバックアップセッションからバック アップを選択してリストアすることができます。詳細は本書で後述します。</li>
<li>全データを消去。このボタンを押すと、NODE\FILESPACEにある全てのオブジェクトが 削除されます。データが実際に削除される前に警告が表示されます。このオプションは テストにおいては有益ですが、注意してご使用ください。基本的にTSM管理者のファイルスペースを削除することと同じです。注意：この機能を使用するためには、TSMデバ イスユーザーは「backdel=yes」アクセスを有する必要があります。</li></ol>
<p align="left"><img alt="Fig 2 - Erase All Data Confirmation" src="~/data/default/images/catalog/original/0805_TSMDevice2.jpg"><br /><font size="1"><strong>図２</strong> — 全データを消去の確認</font><br /><br /></p>
<p><strong>レガシー互換性</strong><br /><br /></p>
<p>TDMデバイスの旧バージョンでは、アーカイブモードまたはバックアップモードを使用することが可能でした。新規バージョンでは、バックアップはバックアップモードのみに制限されています。しかし、以前のバックアップがアーカイブモードで実行されていた場合でも、それらのバックアップはリストアできます。バックアップ／アーカイブおよびフォルダオプションは依然として利用できますが、デザイン上デフォルトで非表示になっています。最初から非表示になっているため、これらのオプションは避けることができます。[ツール]/[オプション]/[デバイス]には、アーカイブモードを有効にできるUI内の新規ダイアログがあります。このオプションを選択した場合、アーカイブモードを使用してバックアップを実行することが依然として可能ですが、様々な制限上推奨されません。<br /><br /></p>
<p align="left"><img alt="Fig 3 - Tivoli Device Options" src="~/data/default/images/catalog/original/0805_TSMDevice3.jpg"><br /><font size="1"><strong>図３</strong> — UltraBacTSMデバイスのオプション</font><br /><br /></p>
<p>「Tivoliデバイスプロパティダイアログのアーカイブモードチェックボックスを有効にする」にチェックし、「OK」をクリックすると、[選択]/[ストレージデバイス]/[Tivoliタブ]/[新規追加]から、わずかに異なるダイアログボックスが利用できるようになります。ここでは同じNODE\FILESPACEを指す新規TSMデバイスが、チェックしたアーカイブモードで作成されています。アーカイブボックスを誤ってチェックしたままにしてしまうことや、その後バックアップが間違った（アーカイブ）モードで処理されることを防ぐため、別のTSMデバイスをレガシーリストア用に作成することをお勧めします。別のTSMデバイスの作成はスクリプトで作成することや、リストアに必要な場合は手動で作成することもできます。また、下記図４のように今は「フォルダ」が表示されます。従って、ユーザーがフォルダオプションを使用して以前にバックアップを実行した場合、リストア目的のためにも有効にすることができます。<br /><br /></p>
<p align="left"><img alt="Fig 4 - UltraBac TSM Device Properties with Folder Field" src="~/data/default/images/catalog/original/0805_TSMDevice4.jpg"><br /><font size="1"><strong>図4</strong> — フォルダフィールドを有するUltraBac TSMデバイスプロパティ</font><br /><br /></p>
<p><strong>アクティブおよび非アクティブバックアップの説明</strong><br /><br /></p>
<p>アクティブおよび非アクティブバックアップを説明するにあたって、TSMにおける各バックアップが擬似テープへ行われるものと考えてください。これはスタンドアロン型テープドライブで、アクティブバックアップはドライブ内のテープです。この場合、テープは取り出せませんが、上書き、追加等はできます。ドライブ内のアクティブテープはクリアできますが、TSMデバイスは基本的にそのテープを「魔法のように」別の非アクティブテープにコピーします。メディアを単純にクリアしないことで、同じアクティブバックアップまたはテープへ多くのバックアップを実行することができます。従って、フルバックアップを月の第一日目に行い、残りの日は増分バックアップを行う場合、フルバックアップ時にメディアをクリア／消去することでこれを簡単に実行するこができます。 120日分（つまり4ヶ月分）のバックアップが必要な場合は、4回分のバックアップを保存し、フルバックアップ時に月に一回メディアを消去するようにTSMデバイスを設定する方がより有用な場合もあります。この方法を使用すると、全ての増分バックアップはフルバックアップとして同じメディアに記録され、フルバックアップに属するそれらの増分バックアップのみが含まれます。フルバックアップのメディアがクリアされると、それらのバックアップは実際に削除されるのでなく、単に非アクティブのバックアップとなります。4回分のバックアップがあるため、最も古い月のバックアップが消去されます。<br /><br /></p>
<p><strong>アクティブおよび非アクティブバックアップをリストアする方法は？</strong><br /><br /></p>
<p>デフォルトでは、リストアを実行した場合、アクティブバックアップのインデックスのみがそのリストアのために表示されます。2ヶ月目の非アクティブバックアップからリストアを実行する必要がある場合、TSMデバイスの設定を2、3個変更する必要があります。下記では、特定の非アクティブバックアップセットを表示する方法について説明します。</p>
<ol>
<li>TSMデバイスに行き、「非アクティブファイルを使用してリストアする」をクリック し、「非アクティブバージョンを選択」をクリックします。完了後に図５と同様のダイ アログボックスが表示されます。<br /><br />
<p align="left"><img alt="Fig 5 - Viewing Inactive Backups" src="~/data/default/images/catalog/original/0805_TSMDevice5.jpg"><br /><font size="1"><strong>図５</strong> — 非アクティブバックアップの表示</font><br /><br /></p>上記ダイアログボックスは、メディアが準備、クリアまたは消去された日付および時 間のみを表示します。 これは、TSMデバイスコードが制限された情報のみを認識するためです。バックアップの種類および説明を表示するには、UltraBacはデバイスおよびそ の実際のファイル内を読み込む必要があるため処理が非効果的となります。メディアが 準備された日付および時間のみの表示で、さらに効果的な方法で適切なバックアップが 認識できる十分な情報があるはずです。各バックアップがTSMに追加された日付および 時間を見るには、「このグループに含まれるセットを表示」をクリックしてください。 これは、特定の日にバックアップがスキップされたかどうか、またどれだけのバックア ップが完了したかなどを把握するのに有益です。しかし、日付および時間以外の詳細は 提供されません。<br /><br /></li>
<p align="left"><img alt="Fig 6 - Set Viewer" src="~/data/default/images/catalog/original/0805_TSMDevice6.jpg"><br /><font size="1"><strong>図６</strong> — セットビューア</font><br /><br /></p>
<li>リストアするバックアップのバージョンを選び、「ＯＫ」をクリックします。</li>
<li>リストアウィザードをクリックし、「ストレージメディアから」を選択します。この項 目では特定のデバイスへの最新またはアクティブバックアップのみを含み、非アクティ ブバックアップからはリストアを完了できないため、「オンラインインデックス」は選 択しないでください。ユーザーがメディアをクリアすると、その削除したバックアップ（実際には削除されず、代わりに非アクティブとマークされる）へのインデックスもま た削除されます。これは、基本的にオンラインインデックスは非アクティブバックアッ プのインデックスを含まないことを意味します。</li></ol>
<p><strong>注意：</strong>&nbsp;&nbsp;エクスプレスインデックスが有効な場合、「リストアウィザード/ストレージメディアから検索」によって、最新またはアクティブバックアップのためのエクスプレスインデックスが表示されます。「エクスプレスインデックス」チェックボックスのチェックは必ず外してください。チェックが付いていると、表示されたインデックスが間違ったインデックスであることがあります。さらに、そのインデックスが読み込まれ、リストアを実行しようとすると、「ファイルに正確に位置付けできません」エラーが発生し易くなり、リストアは失敗します。そのコンピュータ上のTSMデバイスへのみバックアップを実行する場合、不必要な混乱を防ぐため、エクスプレスインデックスを全て無効にすることが強く推奨されます。<br /><br /></p>
<p align="left"><img alt="Fig 7 - Index Options" src="~/data/default/images/catalog/original/0805_TSMDevice7.jpg"><br /><font size="1"><strong>図７</strong> — インデックスオプション</font><br /><br /></p>
<p>上記ダイアログボックスは、エクスプレスインデックスを完全に無効にするオプションの位置を示します。このダイアログボックスは、[ツール]/[オプション]/[全般]/[インデックス]タブから利用できます。下記は、バックアップインデックスを表示するダイログボックスです。この画像は、上記のエクスプレスインデックスオプションが無効な場合に、下記の「エクスプレスインデックスを使用」チェックボックスがグレー表示されることを示します。<br /><br /></p>
<p align="left"><img alt="Fig 8 - Select Index" src="~/data/default/images/catalog/original/0805_TSMDevice8.jpg"><br /><font size="1"><strong>図8</strong> — インデックス選択</font><br /><br /></p>
<p><strong>その他のベストプラクティス</strong><br /><br /></p>
<p>エクスプレスインデックスを含め、メディア消去のタイミングおよび非アクティブデータのリストア方法に関して幾つかの例を提供しました。TSMデバイスの使用時に推奨される別のベストプラクティスは、各コンピュータに対してＮＯＤＥＮＡＭＥを作成することです。さらに、実行されるバックアップの各種類に対してファイルスペースを作成してください。例えば、ユーザーが非常に膨大な１回のバックアップを作成したい場合は、このバックアップを小さいバックアップと同じファイルスペース内には置かないことが推奨されます。これは、UltraBacはファイルを直接ＴＳＭデバイスには書き込まず、代わりに512MBチャンクを作成するためです。<br /><br /></p>
<p>一例として、１つの大きな100GBバックアップを作成し、その後毎回15GBのフルバックアップを作成します。_ub_back.0.01 through_ub_back.0.05 filesが通常のスケジュールで行わされます。しかし、そのような大きいバックアップは再び実行されないため、100GBバックアップの一部として作成された.356ファイルは決して削除されません。ユーザーが別のファイルスペース内に100GBバックアップを置いた場合は、必要なければ簡単に削除することができます。<br /><br /></p>
<p>別の例としては、4回分のファイルバックアップおよび１０回分のイメージバックアップの保存です。この場合、COMPUTERNAME_FILEおよびCOMPUTERNAME_IMAGEなどの別の保存方針を各々が持つ2つのノードを作成することを考えてください。<br /><br /></p>
<p>異なるバックアップの種類で、同じＮＯＤＥＮＡＭＥおよびファイルスペースを対象とすると、メディアの有効期限が早めに切れ問題が生じる場合があります。例えば、イメージバックアップが各回でメディアを起動および消去する場合、増分ファイルバックアップは次の晩を実行し、これらがアクティブバックアップの一部となります。アクティブバックアップもまた、イメージバックアップとなり得るために問題が発生します。混乱を避けるためにも異なる種類のバックアップは別々にしておくことが重要です。<br /><br /></p>
<p>最後に、3つのバックアップバージョンを示すTSM管理者クエリーを考えてください。下記のスクリーンショットでは、1つのバックアップがアクティブで、残りは非アクティブです。このクエリーは、‘‘AND NODE_NAME = ‘COMPUTER’AND FILESPACE_NAME = ‘FILESPACE’ ’ ’の最後に追加して返されるデータの量を制限することができます。<br /><br /></p>
<p align="left"><img alt="Fig 9 - TSM Admin Query with Three Backup Versions" src="~/data/default/images/catalog/original/0805_TSMDevice9.jpg"><br /><font size="1"><strong>図９</strong> — ３つのバックアップバージョンでのＴＳＭ管理者クエリー</font><br /><br /></p>
<hr>

<p><em>&#169; Copyright 2008 UltraBac Software. All rights reserved.<br />UltraBac Software believes the information in this publication is accurate as of its publication date. The information is subject to change without notice.<br />UltraBac Software, UltraBac, UBDR Pro, UBDR Gold, UltraBac Software logo, and Backup and Disaster Recovery for Business are trademarks of UltraBac Software. Other product names mentioned herein may be trademarked and are property of their respective companies.</em></p>
