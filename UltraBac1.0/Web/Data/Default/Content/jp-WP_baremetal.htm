<h2><strong>ベアメタル・リカバリバックアップ保護やＢＣＰ<br />（事業継続計画）の改善</strong><br /><br /></h2>
<p><strong>ベアメタル・リカバリ<br />バックアップ保護やＢＣＰ（事業継続計画）の改善</strong><br /><br />By Morgan S. Edwards (CEO &amp; Founder, UltraBac Software)<br /><em>[12/10/2007]</em><br /><br /></p>
<p><a title="Bare Metal Recovery White Paper" href="~/data/default/content/0712_baremetalrecovery_Japanese.pdf">PDF Version</a><br /><br /></p>
<p>コンピュータ時代の始まり以来、バックアップはデータ損失を防ぐための重要な要素であると広く知られてきました。今日オンライン上に蓄積されていくデータの山を考えると、失われたデータを復旧する技術は余分な贅沢ではなく、むしろビジネスを行う上で基本となる要素です。<br /><br /></p>
<p>ベアメタル・リカバリ（BMR）は 、企業を不要なダウンタイムから守る追加的な保護層であると一般的に考えられています。ファイル事バックアップと復元のソフトウェアはデータ損失を防ぐことにかけては優れていますが、その一方で起動していないコンピュータを完全な動作状態に素早く戻すことにおいて特有の欠点を持っています。それは、ファイル事バックアップ実行のための手順が多いことや、復元してもOSの変更を全て回復できる保証がないことです。したがって、BMRはどの企業のディザスタリカバリ計画においても単なる付録ではなく、実際に重要な要素となるべきなのです。<br /><br /></p>
<p><strong>ベアメタル・リカバリの歴史</strong><br /><br /></p>
<p>始めのころはストレージ費用が非常に高額だったため、個々のトランザクションはパンチカード、紙テープ、または台帳カードに印刷されていました。顧客トランザクションの総計は、台帳カード裏の磁気ストライプ、テープカセット、または超高速大型コンピュータを使用している場合はディスクに保存されていました。 わずかなストレージにも高額の費用がかかることやハードウェアが頻繁に故障してしまうことから、改善までの長い間、企業が紙を頼りにもたつくようなシステム設計がされていました。 <br /><br /></p>
<p>ストレージの技術が進歩するにつれてバイトごとの費用が下がり、より多くのデータがオンラインで管理できるようになりました。これによってバックアップ製品のベンダーはさらに良い技術を生み出して、この技術の進歩に対応しなければならなくなりました。時として進歩はそれそのものが必要であり、画期的な新発明への情熱が生み出すものではありませんでした。必要な進歩の良い例がベアメタル・リカバリです。<br /><br /></p>
<p>デジタル・イクイップメント・コーポレーション（DEC）がミニコンピュータ市場の中心だった時代、BMRはDEC社のVAXユーザーにとっては必須機能でした。これは1台のVAXは1つのOSのみサポートしていたためです。他の製造業者のコンピュータは複数のOSドライブをサポートすることが多かったので、 その内の1つが（理由はどうあれ）機能しなくなっても、他のドライブから起動させることができました。BMRは、起動ができなくなった「故障した」マシンを迅速かつ簡単に復元させたいというVAXエンドユーザーの要求を受けて生み出された技術で、 よく「コールド」ブートと呼ばれています。<br /><br /></p>
<p>Microsoft社がWindows NTを開発したとき、やはり1台のOSドライブのみをサポートするマシンを設計しました。WindowsエンドユーザーはVAXユーザーと同じ問題を抱えました. つまり、OSを再インストールし、起動できなくなるような故障のあった直前と同じ時点の状態にマシンを復元するのはそう簡単なことではありません。 Windows NTを使い出したVAXユーザーは、すぐに相当するBMRを求めるようになりました。<br /><br /></p>
<p>バックアップに特化する第三者ソフトウェアコミュニティは少しずつBMRの重要性を理解し始めました。多くのユーザーにとって、NTに移る前はOSの不具合は大きな問題ではありませんでしたが、高度なエンドユーザーが新しいOSに移行するに従って、迅速で簡単な復元方法に対する需要が高まりました。このようなソリューションを生み出すため、ベンダーはほんの数年前まで広く普及していた従来のファイルバックアップと復元方法を超えるものを考える必要に迫られました。つまり、現在市場で販売されているBMR製品にはビジネス環境でのWindowsの成功が大きく関わっているのです。<br /><br /></p>
<p>過去5年間で、より優れた保護機能を提供する新しいハードウェアとソフトウェア製品が急増しました。当然ながら多くのエンドユーザーは、その選択肢の多さのため、どのデータ保護アプローチが重要で費用をかけるべきか、また、個々の環境においてどのアプローチがオプションとなり得るのか判断をつけられなくなりました。コンピュータのダウンタイムはビジネス全体が失敗する最大の要因となるため、このリスクを最小限にすることが賢明と言えます。しかし、一番の問題は支出可能なソリューション費用とダウンタイムの許容レベルのバランスを保つことです。なぜなら無停止型のコンピュータシステムを購入し実装するには非常に高額な費用がかかるからです。 <br /><br /></p>
<p><strong>Windows NTの時代</strong><br /><br /></p>
<p>Microsoft社がWindows NTをリリースした頃、ほとんどのユーザーは内蔵されたバックアップ製品を使用して定期的にテープにバックアップしていました。第三者が開発したバックアップソリューションが現れ始めたころ、UltraBac Software社が始めてのテープにバックアップするだけではなく、ストレージ選択技としてディスクに書き込みができるように設計されたWindows Server Backup製品を発売しました。ディスクストレージの値段は90年代後半に下がりつづけ、 Windows市場では競合するあらゆるバックアップ製品が何らかのdisk-to-disk機能を搭載して発売されました。テープはあまり信頼できないことが証明されるようになり、マーケットの需要によってこの市場の動きが刺激され、別のより安定したバックアップメディアの形態に向かわせました。代わりのストレージに対する要求はディスクの値段が下がるにつれてますます高まりました。 <br /><br /></p>
<p>エンドユーザーがより高速なdisk-to-diskバックアップに以前よりも頼るようになると、彼らはファイル事の復元に大きな欠点があることに気づきました。テープよりも早いディスクへのバックアップはより早い復元を期待させましたが、従来の復元方法ではこれは不可能だったのです。テープへのバックアップに5時間かかっていたときは、故障したマシンの復旧にも5時間かかるのは際立っているとまではいかなくても普通だと思われていました。バックアップの時間が半分に短縮されたとき、完全に故障したマシンを直ちに復元できる技術を生み出さなければならなくなりました。<br /><br /></p>
<p>Windows NTがリリースされると、ユーザーはいわゆる「死のブルースクリーン」をしばしば経験しました。ブルースクリーン状態は通常はデータ損失の原因にはなりません。これはマシンがただ起動不可能になり、その結果として復旧するまで使えなくなっただけです。復旧するには管理者が臨時のOSをインストールし、バックアップソフトウェアをインストールし、そのバックアップソフトウェアを使用してOSパーティションを復元し、そして再起動する必要がありました。 バックアップと復元はテープとのやりとりにおいて、大抵同じ問題を抱えていました。それは、復元したバックアップは、インストール以来マシン上に蓄積されてきた重要な情報を含んでいないことがよくあることでした。復元にかかる時間に加え、不具合を起こしたマシンが大抵は完全に元の状態に復元されないという事実から、リカバリ方法の改善という需要が生まれ、Windowsに対応したBMRの開発につながりました。 あいにく、機能性に欠けるという認識と高額な費用がかかるという思い込みが原因で多くのエンドユーザーが最初はこのようなソフトウェア技術への投資に反対していました。<br /><br /></p>
<p><strong>タイム・イズ・マネー</strong><br /><br /></p>
<p>不具合を起こしたマシンを直ちにリカバリすることの定義（および金銭的価値）が企業によって異なる一方、ダウンタイムには費用がかかることは疑いのない事実です。ダウンタイムによる実際の損失費用は、１日の時間帯によってさえ変化するため、ほとんどの企業において大抵は十分に把握されていません。ダウンタイムによる損失がA社では1時間につき5,000ドルの場合、これに対してB社では100,000ドルかもしれません。企業内における個々のサーバー間の比率でさえ、実行されているアプリケーションの本質によって大きく変わります。下記の式はダウンタイムの費用を見積もることができる、とても簡単な計算式です。<br /><br /></p>
<p>（1時間あたりの従業員費）&#215;<br />（機能停止によって影響を受ける従業員の割合＋1時間あたりの平均収入）&#215;<br />（機能停止によって影響を受ける収入の割合）=<br /><strong>ダウンタイム1時間あたりの推定平均費用</strong><br />ダウンタイム費用を見積もる簡単な方法」より<br />（イビット A. パターソン作, コンピュータ　サイエンス学部, カリフォルニア大学バークレー校）<br /><br /></p>
<p>ダウンタイム費用には大きく分けて有形と無形の二つのカテゴリがあります。従業員の賃金、運営費、および事務費のような有形費用の計算は分かりやすく、上記のような簡単な数式を使用してかなり正確に見積もることができます。難しいのは、従業員の士気の低下、機会の喪失、売上放棄、そして顧客の信頼喪失など潜在的な無形費用も全て考慮に入れて正確な費用をあてがうことです。肝心なことは、全ての企業がコンピュータのダウンタイムは金銭の損失であると認識することです。しかし残念なことに、多くは実際にどれほどの費用がかかっているか理解していません。<br /><br /></p>
<p><strong>復元時間の短縮－有効性の向上</strong><br /><br /></p>
<p>企業は質の良いベアメタルリカバリソリューションを実行することでサーバーダウンタイムをかなり短縮することができます。標準的なファイルごとの復元方法ではどうしても、素早く簡単にサーバーをオンラインに復帰させることはできません。BMRソフトウェアを使うと経済的な方法で不要なダウンタイムを減らし、マシンの故障による費用を安くすることができます。場合によってはBMRソリューションの初回の使用で投資を全額回収することもできます。<br /><br /></p>
<p>市場には高価なハードウェアやソフトウェア製品が数多くあり、継続したコンピュータ使用に対応するよう設計されています。そういった製品は良い働きをしますが、起動不可能な状況を失くしたり助けたりしてくれるわけでもありません。 例えば、RAIDデバイスの品質が良いとしても、またはクラスタサーバーや複製製品が信頼性に優れているとしても、どれもブルースクリーンの原因となる不正なドライバのインストールを解決する助けにはなりません。このような状況では、複製ソフトウェアは どうしても「二重の問題」となってしまいます。不正なドライバが 復元先のマシンにもコピーされ、同じように起動不可能にさせるからです。 <br /><br /></p>
<p><strong>ベアメタル・リカバリの定義</strong><br /><br /></p>
<p>ベアメタル・リカバリは基本的にマシンのOSパーティションの低レベルなスナップショットを取り、必要なときに素早く簡単にアクセスできる場所にそれを保管する処理を行います。BMRソリューションには２つの要素があります。1つはプログラムで、イメージバックアップ技術を使用して定期的にOSパーティションのスナップショットを取るよう設定されています。これはサービスとしてインストールされ、スケジューラーと一緒に搭載されています。 このスケジューラーは稼動しているマシンのバックアップをとるようプログラムされており、サービスを停止したり、アプリケーションを閉じたり、またはオフラインにしたりせずにこれを実行できます。イメージバックアップは通常、オンラインストレージと必要な時に迅速にアクセスできるようにUNCパス、SAN、またはNASデバイスに保存されています。<br /><br /></p>
<p>BMRソリューションのもう1つの要素はダウンしたマシンを起動させるためのプロセスです。これによりユーザーはオンライン上のイメージバックアップが保存されている場所に接続し、復元を開始できます。OSパーティションが復元されたら（5分から30分程度かかります）、あとは起動メディアを取り出して、マシンを再起動するだけです。この2番目の手順によって、マシンはおよそ2分でイメージバックアップを実行したときの状態にそのまま戻ります。<br /><br /></p>
<p>静的イメージバックアップは通常24時間ごとに実行され、任意でフルバックアップの間に増分および差分バックアップが行われます。BMRの最新の機能は継続的なイメージ保護であるCIPです。CIPは別名CDPまたは継続的データ保護（Continuous Data Protection）とも呼ばれますが、CDPという用語はブロックとファイル保護を区別していません。現在市場に出ている多くのCDP製品はSQLやExchangeのようなアプリケーションのための継続的なデータ保護を提供するだけですが、CIPはそれに対してディスク上の全てのアプリケーションを対象とした包括的な保護を提供します。CDPとCIPが提供する強みは、起動不可能な障害にあう直前の、ある特定時点の状態にマシンを復元することができることです。23時間前の状態に戻すこともありえる標準的なイメージバックアップとは対照的です。<br /><br /></p>
<p>標準的なファイルバックアップソフトウェアを使用すると、ほとんどの企業では故障したサーバーを復元するのに2時間から2日間かかります。BMRソリューションを実行することで、標準的なファイルベースの復元では数時間かかるOSパーティションの復元が10分以下で完了することが考えられます。BMRは早いだけではなく、ファイルごとの復元に比べて簡単です。 高度なBMR製品はフルスクリプト化(簡単な指示による確実な復元)もできるため、夜間警備員でも戦略的な24時間稼動のサーバーを復旧できます。<br /><br /></p>
<p><strong>BMRソリューションの見所</strong><br /><br /></p>
<p>イメージベースのディザスタリカバリが初めてWindows環境に登場したとき、ユーザーの多くはそのサーバー復旧の速さと簡単さに驚きましたが、残念ながらいくつかの制限が適用されていました。保存したイメージバックアップファイルを復元するためには、同一またはほぼ同一のハードウェアに復元しなければいけませんでした。BMRソフトウェアが進化するにつれて重要な機能が搭載され、このソリューションはかなり融通のきくものとなりました。<br /><br /></p>
<p>この技術はますます多くの企業レベルのビジネスにおいて、なくてはならないディザスタリカバリアプリケーションとなりました。今日ではSMB(中小企業)でも、大企業と同様にとってもこの技術が重要だと理解しはじめています。企業にとってどのソフトウェアが適切か考える場合、ベアメタルリカバリソリューションには次のような重要な特徴がいくつかあります。<br /><br /></p>
<ol>
<li>異機種ハードウェア間での復元</li>
<li>仮想統合とディザスタリカバリ</li>
<li>より大きいパーティションとディスクへの復元</li>
<li>より小さいパーティションとディスクへの復元</li>
<li>アクティブディレクトリとドメインコントローラーを安全に復元する機能</li>
<li>フル、増分、および差分選択肢</li>
<li>継続的イメージ保護（CIP）</li>
<li>フルスクリプト化された（簡単な指示による確実な)バックアップと復元）</li>
<li>リモート管理</li>
<li>FTP/SFTPを使用したバックアップと復元</li>
<li>IBM Tivoli ストレージマネージャを使用したバックアップと復元</li>
<li>ローカルまたはリモートテープドライブを使用したバックアップと復元</li>
<li>ローカルまたはリモートライブラリを使用したバックアップと復元</li>
<li>ローカルディスク、UNCパス、SAN、NAS、USB、またはFireWireデバイスを使用したバックアップと復元</li>
<li>CD、DVD、USBキー、またはPXE/RISを使用したバックアップと復元</li>
<li>堅くロックされているファイアウォールを介したバックアップと復元</li>
<li>冗長なオフサイトストレージ用のdisk-to-disk-to-tape選択肢</li></ol>
<p><strong>BMRによるコスト削減方法 </strong><br /><br /></p>
<p>マシンのダウンタイムは企業に対して1分ごとに時間と費用の負担をかけます。したがって、ダウンタイムを抑える方法は、特にそれが手ごろな価格の場合は、非常に価値があることは疑いようもありません。投資回収率（ROI）を証明するために、ここにBMRのシナリオを用意しました。<br /><br /></p>
<p>Windowsサーバーのダウンタイム費の全国平均が1時間あたり 15,000ドル（これはかなり控えめな金額です）だとすると、ダウンタイム1分あたりでは250ドル（約￥27.500）かかることになります。標準的なベアメタルディザスタリカバリがおよそ20分で終了するのに対してファイルバックアップと復元には少なくても40分かかるとすると、BMRソリューションの初回使用によって短縮された20分はダウンタイム費用における5,000ドル分の節約に値します。<br /><br /></p>
<p>これをさらに詳しく説明すると、サーバーごとのプレミアムBMRソリューションの価格を1,000ドルとした場合、企業はこの価格を復元時間の短縮で節約した金額から差し引いて、結果としてまだ4,000ドルを節約できることになります。このような投資回収率を、特に初回使用のみで提供できる製品はそう多くありません。実稼動環境では時間短縮はむしろ6対１に近く、この例で使用した2対1の比率に対してさらに大きなコスト削減をもたらします。<br /><br /></p>
<p><strong>BMRの手順</strong><br /><br /></p>
<p>この二つのバックアップ方法がいかに違うものか読者により深く理解してもらうために、ファイルベースのバックアップおよび復元とイメージベースのバックアップおよび復元の手順を比較してみます。<br /><br /></p>
<p><strong>ファイルごとの復元の例：</strong><br /><br /></p>
<ol>
<li>EISAパーティションをインストール（53分）</li>
<li>Windows OSをインストール（45分）</li>
<li>バックアップソフトウェアをインストール（5分）</li>
<li>データパーティションを作成（10分）</li>
<li>4GBのシステムドライブを復元（35分）</li>
<li>システム状態/レジストリを復元（１時間）</li>
<li>サーバーを再起動（2分）</li></ol>
<p><strong>復元手順の合計＝7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;復元時間＝3.5時間</strong><br /><br /></p>
<p><strong>UltraBac社のUBDR　Goldを使用したベアメタルリカバリの例：</strong><br /><br /></p>
<ol>
<li>UBDR Gold復元メディアを使用してサーバー起動（5分）</li>
<li>UNCパスに接続して控えめに2GB/分の転送速度で10GBのOSパーティションの復元を行う（8分）</li>
<li>サーバーを再起動（2分）</li></ol>
<p><strong>復元手順の合計＝3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;復元時間＝15分</strong><br /><br /></p>
<p>この実例説明のように、BMRソリューションではギガビットネットワーク接続で控えめな2GB/分の転送速度を使用して、故障したマシンの10GBのOSパーティションを15分で簡単に復元できます。早いシステムなら5GB/分の復元速度になります。このBMRプロセスを活用している企業が現在「不満を言う」のは、マシンの起動時間のほうが物理的な復元より時間がかかることについてです。 ファイルごとの復元とBMRソリューションと比較しても、比べ物にならないのは言うまでもありません。<br /><br /></p>
<p><strong>概要</strong><br /><br /></p>
<p>BMRソリューションを購入して実装することは多くの企業にとって優先事項になっており、またそうなるのが当然です。BMRはどのディザスタリカバリ計画でも重要な役割を果たし、故障したサーバーを素早く復元する手段だけではなく、壊滅的な事態からの迅速な復旧によって特段の利益をもたらしてくれます。異機種ハードウェア間および仮想環境間で使用できる復旧機能があれば、企業は一時的にハードウェアを貸してくれる多くのサービス会社に、オフサイトでバックアップを行い損失したサーバーを復元するための明確な道をもたらすことができます。正確に一致するハードウェアを探したり新しい装置への困難なファイル復元を実施する代わりに、ユーザーはたとえばDellサーバーのイメージをHPまたはIBMサーバーに復元できます。適切なBMRソリューションを使用すれば、企業はさらに複数の物理サーバーをVMware GSXホストマシンへ復元し、ほんの数分で再運用できる機能を使用できます。<br /><br /></p>
<p>現在の技術を使うと、もはやファイル事のバックアップソリューションはデータ保護に対する唯一の手段ではありません。企業が持っているサーバーが1台か数千台かに関係なく、ベアメタルリカバリソリューションは高額で不要なダウンタイムに対する必要な予防手段であり、BMRは全てのディザスタリガバリやＢＣＰ（事業継続計画）における重要な役割を担っています。</p>